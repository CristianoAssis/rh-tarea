<!DOCTYPE html>
<html>
  <head>
      <title>Novo colaborador</title>
      <meta charset="UTF-8">

      <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
      <link rel="stylesheet" type="text/css" href="css/gerador.css" />
      <link rel="stylesheet" type="text/css" href="css/font-awesome.min.css" />
  </head>

  <body class="colaborador">
    <!-- Sidebar -->
    <div class="sidebar">
        <h2>1. Instruções</h2>
        Preencha as informações abaixo e verifique o modelo e conteúdo ao lado na aba "Preview". <br/><br/> 
        Feito isso, para finalizar basta clicar em "Finalizar" e depois em "Fazer Download".
        <br/><br/>

        <label>Foto</label>
        <input type='file' onchange="readURL(this);" />

        <br/><br/>

        <label>Título</label>
        <input id="tituloValue" type="text" value="Bem-vindo ao time!"/>

        <br/><br/>

        <label>Texto</label>
        <textarea id="descValue">É com satisfação que damos as boas-vindas ao Leonardo Azevedo Oliveira, que chega para compor o nosso time em Brasília e irá apoiar a equipe do DATASUS. Esperamos que a sua experiência conosco seja excelente e duradoura. Sinta-se acolhido.</textarea>    

        <br/><br/>

        <label>Nome</label>
        <input id="nomeValue" type="text" value="Leonardo azevedo Oliveira" placeholder="" />

        <br/><br/>

        <label>Cargo</label> 
        <input id="cargoValue" type="text" value="Software Architect - SOA & BPM" />

        <div class="btn-download">
          <a id="generatorImg"><i class="fa fa-check-square-o" aria-hidden="true"></i> Clique aqui para finalizar</a> 
          <a id="downloadImg" href="" style="display:none;" download><i class="fa fa-download" aria-hidden="true"></i> Fazer Download</a>
          <a class="back" href="index.php">Voltar</a>
        </div>

    </div>

    <!-- Preview -->
    <div class="content">
      <h2>Preview</h2>
      <div class="wrapper">
        <div id="content-export" >
            <img class="icoTarea" src="img/ico.png">
            <img id="fotoColaborador" src="#" alt="your image" />
            <div class="contentColaborador">
              <h2 id="tituloPrint">Bem-vindo ao time!</h2>
              <p id="descPrint">É com satisfação que damos as boas-vindas ao Leonardo Azevedo Oliveira, que chega para compor o nosso time em Brasília e irá apoiar a equipe do DATASUS.Esperamos que a sua experiência conosco seja excelente e duradoura. Sinta-se acolhido.</p>
              <h3 id="nomePrint">Leonardo Azevedo Oliveira</h3>
              <h4 id="cargoPrint">Software Architect - SOA & BPM</h4>
            </div>
            <img src="img/logo.png" class="logoTarea">
            <img class="footerBar" src="img/footer.png">
        </div>
      </div>
    </div>


    <!-- Scripts -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="js/html2canvas.js"></script>
      
    <script>
      $(function(){
          // Gerador Imagem
          $("#generatorImg").click(function(){
            html2canvas($("#content-export"), {
              onrendered: function(canvas) {
                var imgsrc = canvas.toDataURL("image/png");
                console.log(imgsrc);
                $("#downloadImg").attr('href',imgsrc);
                $("#generatorImg").hide();
                $("#downloadImg").show();
                $('#downloadImg').click(function() {
                    location.reload();
                });
              }
            });
          }); 
        });

        // Change Título
        var titulo = document.getElementById('tituloValue');
        titulo.onkeyup = function() {
          document.getElementById('tituloPrint').innerHTML = titulo.value;
        }

        // Change Texto
        var descricao = document.getElementById('descValue');
        descricao.onkeyup = function() {
          document.getElementById('descPrint').innerHTML = descricao.value;
        }

        // Change Nome
        var nome = document.getElementById('nomeValue');
        nome.onkeyup = function() {
          document.getElementById('nomePrint').innerHTML = nome.value;
        }

        // Change Cargo
        var cargo = document.getElementById('cargoValue');
        cargo.onkeyup = function() {
          document.getElementById('cargoPrint').innerHTML = cargo.value;
        }

        function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    $('#fotoColaborador')
                        .attr('src', e.target.result)
                        // .width(150)
                        // .height(200);
                };

                reader.readAsDataURL(input.files[0]);
            }
        }

      </script>

   </body>
</html>